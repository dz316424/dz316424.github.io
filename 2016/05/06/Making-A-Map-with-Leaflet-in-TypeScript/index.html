<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Making Map with Leaflet in TypeScript | Distributed Knowledge</title><meta name="description" content=""><meta name="keywords" content=""><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="shortcut icon" href="/blog/"><link rel="alternate" href="/blog/atom.xml" title="Distributed Knowledge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="UPDATE 27/12/2016: update for TypeScript 2.0Recently I am working on a web mapping project based on Angular 2. There isn’t much data on how to create web map using Leaflet in TypeScript. So I think it"><meta name="keywords" content="leaflet,typescript"><meta property="og:type" content="article"><meta property="og:title" content="Making Map with Leaflet in TypeScript"><meta property="og:url" content="http://haoliangyu.github.io/blog/2016/05/06/Making-A-Map-with-Leaflet-in-TypeScript/index.html"><meta property="og:site_name" content="Distributed Knowledge"><meta property="og:description" content="UPDATE 27/12/2016: update for TypeScript 2.0Recently I am working on a web mapping project based on Angular 2. There isn’t much data on how to create web map using Leaflet in TypeScript. So I think it"><meta property="og:updated_time" content="2018-03-03T20:45:36.118Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Making Map with Leaflet in TypeScript"><meta name="twitter:description" content="UPDATE 27/12/2016: update for TypeScript 2.0Recently I am working on a web mapping project based on Angular 2. There isn’t much data on how to create web map using Leaflet in TypeScript. So I think it"><link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet"><link href="//cdn.bootcss.com/node-waves/0.7.5/waves.min.css" rel="stylesheet"><link rel="stylesheet" href="/blog/style.css"><script>function setLoadingBarProgress(e){document.getElementById("loading-bar").style.width=e+"%"}</script></head></html><body><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><script>setLoadingBarProgress(20)</script><header class="l_header"><div class="wrapper"><div class="nav-main container container--flex"><a class="logo flat-box" href="/blog/">Distributed Knowledge</a><div class="menu"><ul class="h-list"><li><a class="flat-box nav-home" href="/blog/">Home</a></li><li><a class="flat-box nav-archives" href="/blog/archives">Archives</a></li></ul><div class="underline"></div></div><div class="m_search"><form name="searchform" class="form u-search-form"><input type="text" class="input u-search-input" placeholder="Search"> <span class="icon icon-search"></span></form></div><ul class="switcher h-list"><li class="s-search"><a href="javascript:void(0)"><span class="icon icon-search flat-box"></span></a></li><li class="s-menu"><a href="javascript:void(0)"><span class="icon icon-menu flat-box"></span></a></li></ul></div><div class="nav-sub container container--flex"><a class="logo" class="flat-box" href="javascript:void(0)">Word of Forks</a><ul class="switcher h-list"><li class="s-comment"><a href="javascript:void(0)"><span class="icon icon-chat_bubble_outline flat-box"></span></a></li><li class="s-top"><a href="javascript:void(0)"><span class="icon icon-arrow_upward flat-box"></span></a></li><li class="s-toc"><a href="javascript:void(0)"><span class="icon icon-format_list_numbered flat-box"></span></a></li></ul></div></div></header><aside class="menu-phone"><nav><a href="/blog/" class="nav-home nav">Home </a><a href="/blog/archives" class="nav-archives nav">Archives</a></nav></aside><script>setLoadingBarProgress(40)</script><div class="l_body"><div class="container clearfix"><div class="l_main"><article id="post-Making-A-Map-with-Leaflet-in-TypeScript" class="post white-box article-type-post" itemscope itemprop="blogPost"><section class="meta"><h2 class="title"><a href="/blog/2016/05/06/Making-A-Map-with-Leaflet-in-TypeScript/">Making Map with Leaflet in TypeScript</a></h2><time>May 6, 2016</time><div class="cats"><a href="/blog/categories/GIS/">GIS</a></div></section><section class="toc-wrapper"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Leaflet-Typed"><span class="toc-number">1.</span> <span class="toc-text">Leaflet, Typed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mapping"><span class="toc-number">2.</span> <span class="toc-text">Mapping</span></a></li></ol></section><section class="article typo"><div class="article-entry" itemprop="articleBody"><p><strong>UPDATE 27/12/2016</strong>: update for TypeScript 2.0</p><p>Recently I am working on a web mapping project based on <a href="https://angular.io/" target="_blank" rel="noopener">Angular 2</a>. There isn’t much data on how to create web map using <a href="http://leafletjs.com/" target="_blank" rel="noopener">Leaflet</a> in TypeScript. So I think it’s good to write a post on it.</p><a id="more"></a><h3 id="Leaflet-Typed"><a href="#Leaflet-Typed" class="headerlink" title="Leaflet, Typed"></a>Leaflet, Typed</h3><p>TypeScript is definitely typed so you need to provide a type declaration for Leaflet first. The installation of type declaration is much easier at TypeScript 2.0 for its direct support of <a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm</a> and you just needs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Type declaration <span class="keyword">for</span> GeoJSON, a dependency</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">npm install @types/geojson</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Type declaration <span class="keyword">for</span> Leaflet</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">npm install @types/leaflet</span><br></pre></td></tr></table></figure><p>It will download the type declaration publish <a href="http://definitelytyped.org/" target="_blank" rel="noopener">DefinitelyTyped</a> and relate to the installed package. Simple and no more package manager!</p><h3 id="Mapping"><a href="#Mapping" class="headerlink" title="Mapping"></a>Mapping</h3><p>Using Leaflet in TypeScript doesn’t have an essential difference with using it in JavaScript. The only difference is, in the typed environment, many things are declared as class. So you may need to new a class before directly using it:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> L.Map(<span class="string">'map'</span>, &#123;</span><br><span class="line">  center: <span class="keyword">new</span> L.LatLng(<span class="number">40.731253</span>, <span class="number">-73.996139</span>),</span><br><span class="line">  zoom: <span class="number">12</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>Also you will need to provide extra type information when using function:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">map.on(<span class="string">'click'</span>, (e: LeafletMouseEvent) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> marker = L.marker(e.latlng)</span><br><span class="line">  .bindPopup(<span class="string">'Popup'</span>)</span><br><span class="line">  .addTo(map)</span><br><span class="line">  .openPopup();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>And that’s it. You should have no extra difficult in using Leaflet in TypeScript, if you are familiar with using it in JavaScript and has read the type declaration on what you need.</p><p>Hope you enjoy the journey with TypeScript :)</p></div><div class="article-tags tags"><a href="/blog/tags/leaflet/">leaflet</a> <a href="/blog/tags/typescript/">typescript</a></div><div class="art-item-footer"><span class="art-item-left"><i class="icon icon-chevron-thin-left"></i>prev：<a href="/blog/2016/05/07/geojson-multiply-a-simple-library-to-pack-single-type-geojson-features/" rel="prev" title="geojson-multiply: a simple package to pack single tyle geojson features"> geojson-multiply: a simple package to pack single tyle geojson features </a></span><span class="art-item-right">next：<a href="/blog/2016/02/25/gtran-a-promised-consistent-user-friendly-GeoJson-conversion-package/" rel="next" title="gtran: a promised, consistent, user-friendly GeoJson conversion package"> gtran: a promised, consistent, user-friendly GeoJson conversion package </a><i class="icon icon-chevron-thin-right"></i></span></div></section><section id="comments"><div id="disqus_thread"></div></section></article><script>window.subData={title:"Making Map with Leaflet in TypeScript",tools:!0}</script></div><aside class="l_side"><section class="m_widget about"><div class="header">Haoliang Yu</div><div class="content"><div class="desc">I am a software engineer at Esri DC R&amp;D, working on open data publication and discovery. I love to play with data, cloud computing, and distributed network. I also co-organize MaptimeBUF and speak at variou meetups/conferences.</div></div></section><section class="m_widget links"><div class="header">Links</div><div class="content"><ul class="entry"><li><a class="flat-box" target="_blank" href="https://github.com/haoliangyu"><div class="name">GitHub</div></a></li><li><a class="flat-box" target="_blank" href="https://www.linkedin.com/in/haoliangyu/"><div class="name">LinkedIn</div></a></li><li><a class="flat-box" target="_blank" href="http://dc.esri.com/"><div class="name">EsriDC</div></a></li></ul></div></section><section class="m_widget categories"><div class="header">Categories</div><div class="content"><ul class="entry"><li><a class="flat-box" href="/blog/categories/AWS/"><div class="name">AWS</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/blog/categories/GIS/"><div class="name">GIS</div><div class="badget">14</div></a></li><li><a class="flat-box" href="/blog/categories/Life/"><div class="name">Life</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/blog/categories/Open-Data/"><div class="name">Open Data</div><div class="badget">1</div></a></li><li><a class="flat-box" href="/blog/categories/Project/"><div class="name">Project</div><div class="badget">4</div></a></li></ul></div></section><div class="m_widget tagcloud"><div class="header">Tags</div><div class="content"><a href="/blog/tags/C/" style="font-size:14px;color:grey">C#</a> <a href="/blog/tags/OpenDataDiscovery-org/" style="font-size:15.2px;color:#666">OpenDataDiscovery.org</a> <a href="/blog/tags/arcgis/" style="font-size:18.8px;color:#1a1a1a">arcgis</a> <a href="/blog/tags/arcobject/" style="font-size:14px;color:grey">arcobject</a> <a href="/blog/tags/aws/" style="font-size:14px;color:grey">aws</a> <a href="/blog/tags/ci/" style="font-size:14px;color:grey">ci</a> <a href="/blog/tags/deloyment/" style="font-size:14px;color:grey">deloyment</a> <a href="/blog/tags/geojson/" style="font-size:15.2px;color:#666">geojson</a> <a href="/blog/tags/gis/" style="font-size:20px;color:#000">gis</a> <a href="/blog/tags/javascript/" style="font-size:15.2px;color:#666">javascript</a> <a href="/blog/tags/landsat/" style="font-size:15.2px;color:#666">landsat</a> <a href="/blog/tags/leaflet/" style="font-size:16.4px;color:#4d4d4d">leaflet</a> <a href="/blog/tags/modis/" style="font-size:14px;color:grey">modis</a> <a href="/blog/tags/open-data/" style="font-size:17.6px;color:#333">open data</a> <a href="/blog/tags/openstreetmap/" style="font-size:14px;color:grey">openstreetmap</a> <a href="/blog/tags/project/" style="font-size:16.4px;color:#4d4d4d">project</a> <a href="/blog/tags/python/" style="font-size:16.4px;color:#4d4d4d">python</a> <a href="/blog/tags/remote-sensing/" style="font-size:17.6px;color:#333">remote sensing</a> <a href="/blog/tags/typescript/" style="font-size:16.4px;color:#4d4d4d">typescript</a></div></div></aside><script>setLoadingBarProgress(60)</script></div></div><footer id="footer" class="clearfix"><div class="social-wrapper"><a href="https://github.com/haoliangyu" class="social github" target="_blank" rel="external"><span class="icon icon-github"></span> </a><a href="/atom.xml" class="social rss" target="_blank" rel="external"><span class="icon icon-rss"></span></a></div><div>A blog built by Haoliang Yu</div></footer><script>setLoadingBarProgress(80)</script><script>var disqus_shortname="dz316424",disqus_url="http://haoliangyu.github.io/blog/2016/05/06/Making-A-Map-with-Leaflet-in-TypeScript/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script><script src="//cdn.bootcss.com/node-waves/0.7.5/waves.min.js"></script><script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script><script src="/blog/js/jquery.fitvids.js"></script><script>var GOOGLE_CUSTOM_SEARCH_API_KEY="",GOOGLE_CUSTOM_SEARCH_ENGINE_ID="",ALGOLIA_API_KEY="",ALGOLIA_APP_ID="",ALGOLIA_INDEX_NAME="",AZURE_SERVICE_NAME="",AZURE_INDEX_NAME="",AZURE_QUERY_KEY="",BAIDU_API_ID="",SEARCH_SERVICE="hexo",ROOT="/blog/";ROOT.endsWith("/")||(ROOT+="/")</script><script src="/blog/js/search.js"></script><script src="/blog/js/app.js"></script><script>setLoadingBarProgress(100)</script></body>